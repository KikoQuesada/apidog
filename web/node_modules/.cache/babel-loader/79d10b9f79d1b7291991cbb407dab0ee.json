{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\faque\\\\Desktop\\\\Ironhack\\\\Proyecto-modulo-3\\\\APIDOG\\\\web\\\\src\\\\components\\\\shelters\\\\shelter-form\\\\ShelterForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport shelterService from '../../../services/shelter-service';\nimport './ShelterForm.css';\nimport { useHistory } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EMAIL_PATTERN = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\nconst PASSWORD_PATTERN = /^.{8,}$/;\nconst PHONE_PATTERN = /^[679]{1}[0-9]{8}$/;\nconst CIF_PATTERN = /^([a-z]|[A-Z]|[0-9])[0-9]{7}([a-z]|[A-Z]|[0-9])$/;\n/**\r\n * \r\n {\r\n        \"city\": [\r\n            50,\r\n            50\r\n        ],\r\n        \"rol\": \"shelter\",\r\n    }\r\n * \r\n */\n\nconst validations = {\n  name: value => {\n    let message;\n\n    if (!value) {\n      message = 'A name is required';\n    } else if (value.length < 3) {\n      message = 'Name needs at least 3 chars';\n    } else if (value.length > 50) {\n      message = 'Name needs at most 50 chars';\n    }\n\n    return message;\n  },\n  email: value => {\n    let message;\n\n    if (!value) {\n      message = 'A valid email is required';\n    } else if (!EMAIL_PATTERN.test(value)) {\n      message = 'The email is invalid';\n    }\n\n    return message;\n  },\n  phone: value => {\n    let message;\n\n    if (!value) {\n      message = 'A phone number is required';\n    } else if (!PHONE_PATTERN.test(value)) {\n      message = 'The phone number is invalid';\n    }\n\n    return message;\n  },\n  cif: value => {\n    let message;\n\n    if (!value) {\n      message = 'A CIF of your shelter is required';\n    } else if (!CIF_PATTERN.test(value)) {\n      message = 'The CIF number is invalid';\n    }\n\n    return message;\n  },\n  contact: value => {\n    let message;\n\n    if (!value) {\n      message = 'A contact person is required';\n    }\n\n    return message;\n  },\n  latitude: value => {\n    let message;\n\n    if (!value) {\n      message = 'Latitude is required';\n    } else if (Math.abs(Number(value)) > 90) {\n      message = 'invalid location';\n    }\n\n    return message;\n  },\n  longitude: value => {\n    let message;\n\n    if (!value) {\n      message = 'Longitude is required';\n    } else if (Math.abs(Number(value)) > 180) {\n      message = 'invalid location';\n    }\n\n    return message;\n  },\n  description: value => {\n    let message;\n\n    if (!value) {\n      message = 'A shelter description is required';\n    } else if (value.length < 100) {\n      message = 'Name needs at least 100 chars';\n    } else if (value.length > 300) {\n      message = 'Name needs at most 300 chars';\n    }\n\n    return message;\n  },\n  password: value => {\n    let message;\n\n    if (!value) {\n      message = 'A valid password is required';\n    } else if (!PASSWORD_PATTERN.test(value)) {\n      message = 'The password needs at least 8 chars';\n    }\n\n    return message;\n  }\n};\n\nfunction ShelterForm() {\n  _s();\n\n  const history = useHistory();\n  const [state, setState] = useState({\n    shelter: {\n      name: '',\n      email: '',\n      phone: '',\n      cif: '',\n      contact: '',\n      latitude: '',\n      longitude: '',\n      description: '',\n      password: '',\n      rol: 'shelter'\n    },\n    touch: {},\n    errors: {\n      name: validations.name(),\n      email: validations.email(),\n      phone: validations.phone(),\n      cif: validations.cif(),\n      contact: validations.contact(),\n      latitude: validations.latitude(),\n      longitude: validations.longitude(),\n      description: validations.description(),\n      password: validations.password()\n    }\n  });\n\n  const handleChange = event => {\n    let {\n      name,\n      value\n    } = event.target;\n\n    if (event.target.file) {\n      value = event.target.files[0];\n    }\n\n    setState(state => ({ ...state,\n      shelter: { ...state.shelter,\n        [name]: value\n      },\n      errors: { ...state.errors,\n        [name]: validations[name] && validations[name](value)\n      }\n    }));\n  };\n\n  const handleBlur = event => {\n    const {\n      name\n    } = event.target;\n    setState(state => ({ ...state,\n      touch: { ...state.touch,\n        [name]: true\n      }\n    }));\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    if (isValid()) {\n      try {\n        const shelterData = state.event;\n        shelterData.city = [shelterData.longitude, shelterData.latitude];\n        await shelterService.register(shelter);\n        history.push(`/shelters/${shelter.id}`);\n      } catch (error) {\n        const {\n          message,\n          errors\n        } = error && error.response ? error.response.data : error;\n        console.error(message);\n        if (errors === null || errors === void 0 ? void 0 : errors.city) setState(state => ({ ...state,\n          errors: errors\n        }));\n      }\n    }\n  };\n\n  const isValid = () => {\n    const {\n      errors\n    } = state;\n    return Object.keys(errors).some(error => errors[error]);\n  };\n\n  const {\n    shelter,\n    errors,\n    touch\n  } = state;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-2\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"shelter-avatar-container\",\n          alt: shelter.name,\n          src: shelter.avatar ? shelter.avatar : 'https://res.cloudinary.com/getapet/image/upload/v1617970328/default_avatar_xnnmwl.png'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"col-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-4 d-flex align-items-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-user fa-lg me-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            type: \"text\",\n            value: shelter.name,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            placeholder: \"Name of your shelter\",\n            className: `form-control form-control-underlined border-primary ${touch.name && errors.name ? 'is-invalid' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invalid-feedback\",\n            children: errors.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-4 d-flex align-items-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-envelope fa-lg me-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            type: \"text\",\n            value: shelter.email,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            placeholder: \"Email of your shelter\",\n            className: `form-control form-control-underlined border-primary ${touch.email && errors.email ? 'is-invalid' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invalid-feedback\",\n            children: errors.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-4 d-flex align-items-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-phone fa-lg me-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"phone\",\n            type: \"text\",\n            value: shelter.phone,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            placeholder: \"Phone number of your shelter\",\n            className: `form-control form-control-underlined border-primary ${touch.phone && errors.phone ? 'is-invalid' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invalid-feedback\",\n            children: errors.phone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-4 d-flex align-items-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-check-circle fa-lg me-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"cif\",\n            type: \"text\",\n            value: shelter.cif,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            placeholder: \"CIF/NIE of your shelter\",\n            className: `form-control form-control-underlined border-primary ${touch.cif && errors.cif ? 'is-invalid' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invalid-feedback\",\n            children: errors.cif\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-4 d-flex align-items-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-address-book fa-lg me-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"contact\",\n            type: \"text\",\n            value: shelter.contact,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            placeholder: \"Contact person of your shelter\",\n            className: `form-control form-control-underlined border-primary ${touch.contact && errors.contact ? 'is-invalid' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invalid-feedback\",\n            children: errors.contact\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-4 d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-lock fa-lg me-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            value: shelter.password,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            placeholder: \"Enter your password\",\n            className: `form-control form-control-underlined border-primary ${touch.password && errors.password ? 'is-invalid' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invalid-feedback\",\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-4 d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-edit fa-lg me-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            rows: \"4\",\n            type: \"text\",\n            name: \"description\",\n            value: shelter.description,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            placeholder: \"Shelter description\",\n            className: `form-control form-control-underlined border-primary ${touch.description && errors.description ? 'is-invalid' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invalid-feedback\",\n            children: errors.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-4 d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-map-marker-alt fa-lg me-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"location\",\n            value: shelter.password,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            placeholder: \"Enter your password\",\n            className: `form-control form-control-underlined border-primary ${touch.password && errors.password ? 'is-invalid' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invalid-feedback\",\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn create-shelter-btn\",\n          type: \"submit\",\n          disabled: isValid(),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 99\n          }, this), \" Register Shelter\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ShelterForm, \"qUTAhCG5sWSDbCh/gPppYuqe+Gc=\", false, function () {\n  return [useHistory];\n});\n\n_c = ShelterForm;\nexport default ShelterForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShelterForm\");","map":{"version":3,"sources":["C:/Users/faque/Desktop/Ironhack/Proyecto-modulo-3/APIDOG/web/src/components/shelters/shelter-form/ShelterForm.js"],"names":["useState","shelterService","useHistory","EMAIL_PATTERN","PASSWORD_PATTERN","PHONE_PATTERN","CIF_PATTERN","validations","name","value","message","length","email","test","phone","cif","contact","latitude","Math","abs","Number","longitude","description","password","ShelterForm","history","state","setState","shelter","rol","touch","errors","handleChange","event","target","file","files","handleBlur","handleSubmit","preventDefault","isValid","shelterData","city","register","push","id","error","response","data","console","Object","keys","some","avatar"],"mappings":"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","sourcesContent":["\r\nimport { useState } from 'react';\r\nimport shelterService from '../../../services/shelter-service';\r\nimport './ShelterForm.css';\r\nimport { useHistory } from 'react-router';\r\nconst EMAIL_PATTERN = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\nconst PASSWORD_PATTERN = /^.{8,}$/;\r\nconst PHONE_PATTERN = /^[679]{1}[0-9]{8}$/;\r\nconst CIF_PATTERN = /^([a-z]|[A-Z]|[0-9])[0-9]{7}([a-z]|[A-Z]|[0-9])$/;\r\n\r\n/**\r\n * \r\n {\r\n        \"city\": [\r\n            50,\r\n            50\r\n        ],\r\n        \"rol\": \"shelter\",\r\n    }\r\n * \r\n */\r\n\r\nconst validations = {\r\n    name: (value) => {\r\n        let message;\r\n        if (!value) {\r\n            message = 'A name is required';\r\n        } else if (value.length < 3) {\r\n            message = 'Name needs at least 3 chars'\r\n        } else if (value.length > 50) {\r\n            message = 'Name needs at most 50 chars'\r\n        }\r\n        return message;\r\n    },\r\n    email: (value) => {\r\n        let message;\r\n        if(!value) {\r\n            message = 'A valid email is required'\r\n        } else if (!EMAIL_PATTERN.test(value)) {\r\n            message = 'The email is invalid'\r\n        }\r\n        return message;\r\n    },\r\n    phone: (value) => {\r\n        let message;\r\n        if(!value) {\r\n            message = 'A phone number is required'\r\n        } else if (!PHONE_PATTERN.test(value)) {\r\n            message = 'The phone number is invalid'\r\n        }\r\n        return message;\r\n    },\r\n    cif: (value) => {\r\n        let message;\r\n        if(!value) {\r\n            message = 'A CIF of your shelter is required'\r\n        } else if (!CIF_PATTERN.test(value)) {\r\n            message = 'The CIF number is invalid'\r\n        }\r\n        return message;\r\n    },\r\n    contact: (value) => {\r\n        let message;\r\n        if(!value) {\r\n            message = 'A contact person is required'\r\n        }\r\n        return message;\r\n    },\r\n    latitude: (value) => {\r\n        let message;\r\n        if (!value) {\r\n            message = 'Latitude is required';\r\n          } else if (Math.abs(Number(value)) > 90) {\r\n            message = 'invalid location';\r\n          }\r\n          return message;\r\n        },\r\n    longitude: (value) => {\r\n        let message;\r\n        if (!value) {\r\n            message = 'Longitude is required';\r\n        } else if (Math.abs(Number(value)) > 180) {\r\n            message = 'invalid location';\r\n        }\r\n        return message;\r\n        },\r\n    description: (value) => {\r\n        let message;\r\n        if(!value) {\r\n            message = 'A shelter description is required'\r\n        } else if (value.length < 100) {\r\n            message = 'Name needs at least 100 chars'\r\n        } else if (value.length > 300) {\r\n            message = 'Name needs at most 300 chars'\r\n        }\r\n        return message;\r\n    },\r\n    password: (value) => {\r\n        let message;\r\n        if(!value) {\r\n            message = 'A valid password is required'\r\n        } else if (!PASSWORD_PATTERN.test(value)) {\r\n            message = 'The password needs at least 8 chars'\r\n        }\r\n        return message;\r\n    },\r\n}\r\n\r\nfunction ShelterForm() {\r\n\r\n    const history = useHistory();\r\n\r\n    const [state, setState] = useState({\r\n        shelter: {\r\n            name: '',\r\n            email: '',\r\n            phone: '',\r\n            cif: '',\r\n            contact: '',\r\n            latitude: '',\r\n            longitude: '',\r\n            description: '',\r\n            password: '',\r\n            rol: 'shelter'\r\n        },\r\n        touch: {},\r\n        errors: {\r\n            name: validations.name(),\r\n            email: validations.email(),\r\n            phone: validations.phone(),\r\n            cif: validations.cif(),\r\n            contact: validations.contact(),\r\n            latitude: validations.latitude(),\r\n            longitude: validations.longitude(),\r\n            description: validations.description(),\r\n            password: validations.password(),\r\n        }\r\n    });\r\n\r\n    const handleChange = (event) => {\r\n        let { name, value } = event.target;\r\n\r\n        if (event.target.file) {\r\n            value = event.target.files[0]\r\n        }\r\n\r\n\r\n        setState(state => ({\r\n            ...state,\r\n            shelter: {\r\n                ...state.shelter,\r\n                [name]: value\r\n            },\r\n            errors: {\r\n                ...state.errors,\r\n                [name]: validations[name] && validations[name](value)\r\n            }\r\n        }));\r\n    }\r\n\r\n    const handleBlur = (event) => {\r\n        const { name } = event.target;\r\n        setState(state => ({\r\n            ...state,\r\n            touch: {\r\n                ...state.touch,\r\n                [name]: true\r\n            }\r\n        }));\r\n    }\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        \r\n        if(isValid()) {\r\n            try {\r\n                const shelterData = state.event;\r\n                shelterData.city = [shelterData.longitude, shelterData.latitude]\r\n                await shelterService.register(shelter);\r\n                history.push(`/shelters/${shelter.id}`)\r\n            } catch (error) {   \r\n                const { message, errors } = error && error.response ? error.response.data : error;\r\n                console.error(message);\r\n\r\n                if (errors?.city)\r\n                setState(state => ({\r\n                    ...state,\r\n                    errors: errors\r\n                }))\r\n            }\r\n        }\r\n    }\r\n\r\n    const isValid = () => {\r\n        const { errors } = state;\r\n        return Object.keys(errors).some(error => errors[error]);\r\n    }\r\n\r\n    const { shelter, errors, touch } = state;\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n            <div className=\"col-2\">\r\n                <img className=\"shelter-avatar-container\" alt={shelter.name} src={shelter.avatar ? shelter.avatar: 'https://res.cloudinary.com/getapet/image/upload/v1617970328/default_avatar_xnnmwl.png'} />\r\n            </div>\r\n                <form onSubmit={handleSubmit} className=\"col-6\">\r\n                    <div className=\"input-group mb-4 d-flex align-items-end\">\r\n                        <span><i className=\"fas fa-user fa-lg me-3\"></i></span>\r\n                        <input name=\"name\" type=\"text\" value={shelter.name} onChange={handleChange} onBlur={handleBlur} placeholder=\"Name of your shelter\" className={`form-control form-control-underlined border-primary ${touch.name && errors.name ? 'is-invalid' : ''}`}/>\r\n                        <div className=\"invalid-feedback\">{errors.name}</div>\r\n                    </div>\r\n\r\n                    <div className=\"input-group mb-4 d-flex align-items-end\">\r\n                        <span><i className=\"fas fa-envelope fa-lg me-3\"></i></span>\r\n                        <input name=\"email\" type=\"text\" value={shelter.email} onChange={handleChange} onBlur={handleBlur} placeholder=\"Email of your shelter\" className={`form-control form-control-underlined border-primary ${touch.email && errors.email ? 'is-invalid' : ''}`}/>\r\n                        <div className=\"invalid-feedback\">{errors.email}</div>\r\n                    </div>\r\n\r\n                    <div className=\"input-group mb-4 d-flex align-items-end\">\r\n                        <span><i className=\"fas fa-phone fa-lg me-3\"></i></span>\r\n                        <input name=\"phone\" type=\"text\" value={shelter.phone} onChange={handleChange} onBlur={handleBlur} placeholder=\"Phone number of your shelter\" className={`form-control form-control-underlined border-primary ${touch.phone && errors.phone ? 'is-invalid' : ''}`}/>\r\n                        <div className=\"invalid-feedback\">{errors.phone}</div>\r\n                    </div>\r\n\r\n                    <div className=\"input-group mb-4 d-flex align-items-end\">\r\n                        <span><i className=\"fas fa-check-circle fa-lg me-3\"></i></span>\r\n                        <input name=\"cif\" type=\"text\" value={shelter.cif} onChange={handleChange} onBlur={handleBlur} placeholder=\"CIF/NIE of your shelter\" className={`form-control form-control-underlined border-primary ${touch.cif && errors.cif ? 'is-invalid' : ''}`}/>\r\n                        <div className=\"invalid-feedback\">{errors.cif}</div>\r\n                    </div>\r\n\r\n                    <div className=\"input-group mb-4 d-flex align-items-end\">\r\n                        <span><i className=\"fas fa-address-book fa-lg me-3\"></i></span>\r\n                        <input name=\"contact\" type=\"text\" value={shelter.contact} onChange={handleChange} onBlur={handleBlur} placeholder=\"Contact person of your shelter\" className={`form-control form-control-underlined border-primary ${touch.contact && errors.contact ? 'is-invalid' : ''}`}/>\r\n                        <div className=\"invalid-feedback\">{errors.contact}</div>\r\n                    </div>\r\n\r\n                    <div className=\"input-group mb-4 d-flex align-items-center\">\r\n                        <span><i className=\"fas fa-lock fa-lg me-3\"></i></span>\r\n                        <input type=\"password\" name=\"password\" value={shelter.password} onChange={handleChange} onBlur={handleBlur} placeholder=\"Enter your password\" className={`form-control form-control-underlined border-primary ${touch.password && errors.password ? 'is-invalid' : ''}`}/>\r\n                        <div className=\"invalid-feedback\">{errors.password}</div>\r\n                    </div>\r\n\r\n                    <div className=\"input-group mb-4 d-flex align-items-center\">\r\n                        <span><i className=\"fas fa-edit fa-lg me-3\"></i></span>\r\n                        <textarea rows='4' type=\"text\" name=\"description\" value={shelter.description} onChange={handleChange} onBlur={handleBlur} placeholder=\"Shelter description\" className={`form-control form-control-underlined border-primary ${touch.description && errors.description ? 'is-invalid' : ''}`}/>\r\n                        <div className=\"invalid-feedback\">{errors.description}</div>\r\n                    </div>\r\n\r\n                    <div className=\"input-group mb-4 d-flex align-items-center\">\r\n                        <span><i className=\"fas fa-map-marker-alt fa-lg me-3\"></i></span>\r\n                        <input type=\"text\" name=\"location\" value={shelter.password} onChange={handleChange} onBlur={handleBlur} placeholder=\"Enter your password\" className={`form-control form-control-underlined border-primary ${touch.password && errors.password ? 'is-invalid' : ''}`}/>\r\n                        <div className=\"invalid-feedback\">{errors.password}</div>\r\n                    </div>\r\n\r\n                    {/* <div className=\"input-group mb-4 d-flex align-items-center\">\r\n                        <span><i className=\"fas fa-cloud-upload-alt fa-lg me-3\"></i></span>\r\n                        <input name=\"avatar\" type=\"file\"  onChange={handleChange} onBlur={handleBlur} placeholder=\"Shelter logo\" className={`form-control form-control-underlined border-primary ${touch.avatar && errors.avatar ? 'is-invalid' : ''}`}/>\r\n                        <span></span>\r\n                        <div className=\"invalid-feedback\">{errors.avatar}</div>\r\n                    </div> */}\r\n\r\n                    <button className=\"btn create-shelter-btn\" type=\"submit\" disabled={isValid()}><i className=\"fas fa-plus\"></i> Register Shelter</button>\r\n                </form>\r\n            </div>\r\n            \r\n        </div>\r\n        \r\n    );\r\n\r\n\r\n}\r\n\r\nexport default ShelterForm;"]},"metadata":{},"sourceType":"module"}